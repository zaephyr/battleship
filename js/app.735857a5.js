(function(t){function r(r){for(var i,n,s=r[0],c=r[1],l=r[2],u=0,d=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(r);while(d.length)d.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var t,r=0;r<o.length;r++){for(var e=o[r],i=!0,s=1;s<e.length;s++){var c=e[s];0!==a[c]&&(i=!1)}i&&(o.splice(r--,1),t=n(n.s=e[0]))}return t}var i={},a={app:0},o=[];function n(r){if(i[r])return i[r].exports;var e=i[r]={i:r,l:!1,exports:{}};return t[r].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=i,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)n.d(e,i,function(r){return t[r]}.bind(null,i));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="/battleship/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=r,s=s.slice();for(var l=0;l<s.length;l++)r(s[l]);var p=c;o.push([0,"chunk-vendors"]),e()})({0:function(t,r,e){t.exports=e("56d7")},"56d7":function(t,r,e){"use strict";e.r(r);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{attrs:{id:"container"}},[e("app-the-game",{attrs:{gameFlow:t.gameFlow,player:t.player,computer:t.computer,createShip:t.createShip,shipFactory:t.shipFactory,isCoordValid:t.isCoordValid},on:{resetGame:t.resetGame}})],1)},o=[],n=(e("a623"),e("cb29"),e("4160"),e("a9e3"),e("9129"),function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",[e("div",{staticClass:"grids"},[e("div",{staticClass:"player-side"},[e("h2",[t._v("Player: "+t._s(t.playerShipsAlive))]),e("div",{staticClass:"player-grid",class:{active:!t.gameFlow.playerTurn&&t.gameFlow.gameStarted}},[t._l(Math.pow(t.MAX+1,2),(function(r,i){return e("div",{key:t.keys[t.MIN+i],staticClass:"place",attrs:{"data-player-coord":t.stringifiedCoords[t.MIN+i]}})})),t._l(t.player.ships,(function(r,i){return e("div",{key:i,staticClass:"ship",class:{gridSnap:t.gameFlow.placingShips,moveCursor:t.gameFlow.placingShips},style:{top:50*r.position[0].y+"px",left:50*r.position[0].x+"px",width:"horizontal"==r.direction?50*r.length+"px":"50px",height:"vertical"==r.direction?50*r.length+"px":"50px",opacity:"0.7"},attrs:{id:i,"data-length":r.length,"data-direction":r.direction,"data-coords":r.position[0].y.toString()+r.position[0].x.toString()},on:{dblclick:t.rotateShip}})}))],2)]),e("div",{staticClass:"comp-side"},[e("h2",[t._v("Computer: "+t._s(t.compShipsAlive))]),e("div",{staticClass:"computer-grid",class:{active:t.gameFlow.gameStarted&&t.gameFlow.playerTurn}},t._l(Math.pow(t.MAX+1,2),(function(r,i){return e("div",{key:t.keys[t.MIN+i],staticClass:"square",attrs:{"data-coord":t.stringifiedCoords[t.MIN+i]},on:{"~click":function(r){return t.playerAttack(r)}}})})),0)])]),e("div",[t.gameFlow.gameStarted?t._e():e("button",{on:{click:function(r){t.gameFlow.gameStarted=!0,t.gameFlow.playerTurn=!0,t.gameFlow.placingShips=!1}}},[t._v(" Start Game ")]),t.gameFlow.gameStarted?e("button",{on:{click:function(r){t.gameFlow.gameStarted=!1,t.gameFlow.placingShips=!0,t.gameFlow.winner=!1,t.gameFlow.playerTurn=!1,t.$emit("resetGame")}}},[t._v(" Reset Game ")]):t._e()])])}),s=[],c=(e("99af"),e("caad"),e("c975"),e("d81d"),e("a434"),e("8ba4"),e("d3b7"),e("ac1f"),e("25f0"),e("2532"),e("4d90"),e("5319"),e("159b"),e("5014")),l=e.n(c),p={props:{gameFlow:{type:Object,required:!0},player:{type:Object,required:!0},computer:{type:Object,required:!0},createShip:{type:Function},shipFactory:{type:Function},isCoordValid:{type:Function}},data:function(){return{MIN:0,MAX:9,compShipsAlive:this.computer.numOfLiveShips,playerShipsAlive:this.player.numOfLiveShips,compAttackOptions:[],lastSuccesfullAttack:[]}},mounted:function(){for(var t=0;t<100;t++)this.compAttackOptions.push(String(t).padStart(2,"0"));var r,e,i=this,a=0,o=0;l()(".gridSnap").draggable({modifiers:[l.a.modifiers.snap({targets:[l.a.createSnapGrid({x:50,y:50})],range:1/0,relativePoints:[{x:0,y:0}],offset:"parent"}),l.a.modifiers.restrict({restriction:"parent",elementRect:{top:0,left:0,bottom:1,right:1},endOnly:!0})],inertia:!1}).on("dragmove",(function(t){var i=t.target.getAttribute("data-length"),n=t.target.getAttribute("data-direction");a+=t.dx,o+=t.dy,e=t.target,t.target.style.webkitTransform=t.target.style.transform="translate("+a+"px, "+o+"px)",r=[Math.round((parseInt(t.target.style.top.replace("px",""))+o)/50).toString()+Math.round((parseInt(t.target.style.left.replace("px",""))+a)/50).toString()];for(var s=1;s<i;s++){if(1===i)return;"horizontal"===n?r.push(Math.round((parseInt(t.target.style.top.replace("px",""))+o)/50).toString()+Math.round((parseInt(t.target.style.left.replace("px",""))+a)/50+s).toString()):"vertical"===n&&r.push(Math.round((parseInt(t.target.style.top.replace("px",""))+o)/50+s).toString()+Math.round((parseInt(t.target.style.left.replace("px",""))+a)/50).toString())}})).on("dragend",(function(){var t=e.getAttribute("id"),n="vertical"==e.getAttribute("data-direction"),s=Number(e.getAttribute("data-length")),c=Number(r[0][1])-Math.round(a/50),l=Number(r[0][0])-Math.round(o/50),p=Number(r[0][1]),u=Number(r[0][0]);if(1===s)i.player.gridMap[l][c]="";else if(n){if(n)for(var d=0;d<s;d++)i.player.gridMap[l+d][c]=""}else for(var h=0;h<s;h++)i.player.gridMap[l][c+h]="";i.createShip(u,p,i.shipFactory(s),n,i.player.gridMap,t),event.target.attributes[3].value=u.toString()+p.toString(),e.style.webkitTransform=e.style.transform="translate("+a+"px, "+o+"px)",a=0,o=0}))},methods:{rotateShip:function(t){if(!this.gameFlow.gameStarted){var r=t.target.getAttribute("id"),e="vertical"==t.target.getAttribute("data-direction"),i=Number(t.target.getAttribute("data-length")),a=parseInt(t.target.getAttribute("data-coords")[1]),o=parseInt(t.target.getAttribute("data-coords")[0]);if(1!==i){if(e){if(e)for(var n=0;n<i;n++)this.player.gridMap[o+n][a]=""}else for(var s=0;s<i;s++)this.player.gridMap[o][a+s]="";e=!e,this.createShip(o,a,this.shipFactory(i),e,this.player.gridMap,r);var c=[t.target.style.height,t.target.style.width];t.target.style.width=c[0],t.target.style.height=c[1]}}},playerAttack:function(t){var r=this;if(!0===this.gameFlow.playerTurn){t.target.style.fontSize="20px";var e=JSON.parse(t.target.dataset.coord),i=this.computer.gridMap[e.y][e.x],a=i[1];""==i?(t.target.textContent="~",this.gameFlow.playerTurn=!1,this.computerAttack()):(Number.isInteger(a)&&(i[0].hit(a),i[0].isSunk()&&(this.compShipsAlive-=1,0==this.compShipsAlive&&(this.gameFlow.gameStarted=!1,this.gameFlow.winner=!0,alert("You won!")),i[0].coords.forEach((function(t){var e=JSON.stringify({x:t[0],y:t[1]}),i=document.querySelector("[data-coord='".concat(e,"']"));i.style.color="red";for(var a=[{x:t[0]-1,y:t[1]},{x:t[0]+1,y:t[1]},{x:t[0],y:t[1]-1},{x:t[0],y:t[1]+1}],o=0;o<4;o++){var n=a[o].x,s=a[o].y;if(r.isCoordValid({x:n,y:s})&&""===r.computer.gridMap[s][n]){var c=JSON.stringify(a[o]),l=document.querySelector("[data-coord='".concat(c,"']"));l.textContent="~",l.style.fontSize="20px"}}})))),t.target.textContent="X")}},randomCoords:function(){var t=this,r=function(){var r=Math.floor(Math.random()*t.compAttackOptions.length).toString();return t.compAttackOptions[r]},e=r(),i=parseInt(e[1]),a=parseInt(e[0]);return{x:i,y:a}},computerAttack:function(){var t=this;if(this.gameFlow.playerTurn=!1,!this.gameFlow.playerTurn){var r=this.randomCoords(),e=r.x,i=r.y;do{if(1==this.lastSuccesfullAttack.length?(e=this.lastSuccesfullAttack[0].x,i=this.lastSuccesfullAttack[0].y,this.compAttackOptions.includes(i.toString()+(e-1).toString())?e-=1:this.compAttackOptions.includes(i.toString()+(e+1).toString())?e+=1:this.compAttackOptions.includes((i-1).toString()+e.toString())?i-=1:this.compAttackOptions.includes((i+1).toString()+e.toString())&&(i+=1)):this.lastSuccesfullAttack.length>=2&&(e=this.lastSuccesfullAttack[this.lastSuccesfullAttack.length-1].x,i=this.lastSuccesfullAttack[this.lastSuccesfullAttack.length-1].y,this.player.gridMap[i][e][0].isVertical?this.compAttackOptions.includes((i-1).toString()+e.toString())?i-=1:this.compAttackOptions.includes((i+1).toString()+e.toString())?i+=1:i+=this.lastSuccesfullAttack.length:this.player.gridMap[i][e][0].isVertical||(this.compAttackOptions.includes(i.toString()+(e-1).toString())?e-=1:this.compAttackOptions.includes(i.toString()+(e+1).toString())?e+=1:e+=this.lastSuccesfullAttack.length)),""===this.player.gridMap[i][e]){this.player.gridMap[i][e]="~",this.compAttackOptions.splice(this.compAttackOptions.indexOf(i.toString()+e.toString()),1),this.gameFlow.playerTurn=!0;var a=JSON.stringify({x:e,y:i}),o=document.querySelector("[data-player-coord='".concat(a,"']"));return o.style.border="solid #c0392b 3px",o.style.color="#c0392b",o.style.fontSize="20px",void(o.textContent="~")}Array.isArray(this.player.gridMap[i][e])&&function(){t.compAttackOptions.splice(t.compAttackOptions.indexOf(i.toString()+e.toString()),1),t.player.gridMap[i][e][0].hit(t.player.gridMap[i][e][1]),t.lastSuccesfullAttack.push({x:e,y:i,part:t.player.gridMap[i][e][1]});var r=JSON.stringify({x:e,y:i}),a=document.querySelector("[data-player-coord='".concat(r,"']"));a.style.border="solid #c0392b 3px",a.style.fontSize="20px",a.style.color="#c0392b",a.textContent="X",t.player.gridMap[i][e][0].isSunk()&&(t.lastSuccesfullAttack=[],t.player.gridMap[i][e][0].coords.forEach((function(e){r=JSON.stringify({x:e[0],y:e[1]}),a=document.querySelector("[data-player-coord='".concat(r,"']")),a.style.backgroundColor="#f1c40f";for(var i=[{x:e[0]-1,y:e[1]},{x:e[0]+1,y:e[1]},{x:e[0],y:e[1]-1},{x:e[0],y:e[1]+1}],o=0;o<4;o++){var n=i[o].x,s=i[o].y;if(t.isCoordValid({x:n,y:s})&&""===t.player.gridMap[s][n]){var c=JSON.stringify(i[o]),l=document.querySelector("[data-player-coord='".concat(c,"']"));l.style.border="solid #c0392b 3px",l.style.color="#c0392b",l.textContent="~",l.style.fontSize="20px",-1!==t.compAttackOptions.indexOf(s.toString()+n.toString())&&t.compAttackOptions.splice(t.compAttackOptions.indexOf(s.toString()+n.toString()),1)}}})),t.playerShipsAlive-=1)}(),0===this.playerShipsAlive&&(this.gameFlow.gameStarted=!1,this.gameFlow.winner=!0,alert("Computer won!")),r=this.randomCoords(),e=r.x,i=r.y}while(!this.gameFlow.playerTurn)}}},computed:{coords:function(){for(var t=[],r=this.MIN;r<=this.MAX;r++)for(var e=this.MIN;e<=this.MAX;e++)t.push({x:e,y:r});return t},keys:function(){return this.coords.map((function(t,r){return"".concat(JSON.stringify(t),"-").concat(r)}))},stringifiedCoords:function(){return this.coords.map((function(t){return JSON.stringify(t)}))}}},u=p,d=(e("8237"),e("2877")),h=Object(d["a"])(u,n,s,!1,null,null,null),y=h.exports,g={data:function(){return{gameFlow:{playerTurn:!1,placingShips:!0,gameStarted:!1,winner:!1},player:this.generateGrid(),computer:this.generateGrid()}},components:{appTheGame:y},methods:{resetGame:function(){this.player=this.generateGrid(),this.computer=this.generateGrid()},getRandomCoord:function(){return Math.floor(10*Math.random())},verticalOrNot:function(){return Math.random()<=.5},shipFactory:function(t){t>=4?t=4:t<=1&&(t=1);var r=[];r.length=t,r.fill(0);var e=function(t){r[t]=1},i=function(){var t=function(t){return 1==t};return r.every(t)};return{hp:r,len:t,hit:e,isSunk:i}},isCoordValid:function(t){var r=t.x,e=t.y,i=function(t){return 0<=t&&t<=9},a=function(t){return!Number.isNaN(t)&&"number"===typeof t&&i(t)};return a(r)&&a(e)},isShipPlaceable:function(t,r,e,i){if(i){for(var a=t.y;a<=r.y;a++)if(""!=e[t.y][a])return!1;for(var o=t.y-1;o<=r.y+1;o++)if(this.isCoordValid({x:t.x-1,y:o})&&""!=e[o][t.x-1])return!1;for(var n=t.y-1;n<=r.y+1;n++)if(this.isCoordValid({x:t.x+1,y:n})&&""!=e[n][t.x+1])return!1;return(!this.isCoordValid({x:t.x,y:t.y-1})||""==e[t.y-1][t.x])&&(!this.isCoordValid({x:t.x,y:r.y+1})||""==e[r.y+1][t.x])}for(var s=t.x;s<=r.x;s+=1)if(""!=e[t.y][s])return!1;for(var c=t.x-1;c<=r.x+1;c+=1)if(this.isCoordValid({x:c,y:t.y-1})&&""!=e[t.y-1][c])return!1;for(var l=t.x+1;l<=r.x+1;l+=1)if(this.isCoordValid({x:l,y:t.y+1})&&""!=e[t.y+1][l])return!1;return(!this.isCoordValid({x:t.x-1,y:t.y})||""==e[t.y][t.x-1])&&(!this.isCoordValid({x:t.x+1,y:t.y})||""==e[t.y][t.x+1])},isShipValid:function(t,r,e,i){var a=e.x,o=e.y;if(t&&this.isCoordValid({x:a,y:o})){var n={x:a,y:o},s=i?{x:a,y:o+t.len-1}:{x:a+t.len-1,y:o};return this.isCoordValid(s)&&this.isShipPlaceable(n,s,r,i)}return!1},isShipReq:function(t,r){var e={ship4:1,ship3:2,ship2:3,ship1:4},i="ship".concat(t.len);return r[i]+1<=e[i]},createShip:function(t,r,e,i,a){var o=e;o.coords=[],o.isVertical=i;for(var n=0;n<e.len;n++)0==i?(o.coords[n]=[r+n,t],a[t][r+n]=[o,n],[{x:r+n-1,y:t},{x:r+n+1,y:t},{x:r+n,y:t-1},{x:r+n,y:t+1}]):1==i&&(a[t+n][r]=[o,n],o.coords[n]=[r,t+n],[{x:r-1,y:t+n},{x:r+1,y:t+n},{x:r,y:t+n-1},{x:r,y:t+n+1}])},generateShips:function(t,r,e,i,a,o){var n=i.x,s=i.y;if(this.isShipValid(t,r,{x:n,y:s},a)&&this.isShipReq(t,e)){this.createShip(s,n,t,a,r,o);var c="ship".concat(t.len);e[c]+=1}},generateGrid:function(){for(var t=this,r=[],e=0;e<10;e++){r.push([]);for(var i=0;i<10;i++)r[e].push("")}var a=[4,3,3,2,2,2,1,1,1,1],o={ship4:0,ship3:0,ship2:0,ship1:0},n=0,s=[],c=0;return a.forEach((function(e){var i=t.getRandomCoord(),a=t.getRandomCoord(),l=t.verticalOrNot();while(!t.isShipValid(t.shipFactory(e),r,{x:i,y:a},l))i=t.getRandomCoord(),a=t.getRandomCoord(),l=t.verticalOrNot();if(t.isShipValid(t.shipFactory(e),r,{x:i,y:a},l)){t.generateShips(t.shipFactory(e),r,o,{x:i,y:a},l,c);var p={x:i,y:a},u=l?{x:i,y:a+e-1}:{x:i+e-1,y:a};s.push({length:e,direction:l?"vertical":"horizontal",position:[p,u]}),c+=1,n+=1}})),{gridMap:r,ships:s,numOfLiveShips:n,boardInfo:o}}}},f=g,m=Object(d["a"])(f,a,o,!1,null,null,null),S=m.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(S)}}).$mount("#app")},8237:function(t,r,e){"use strict";var i=e("93a0"),a=e.n(i);a.a},"93a0":function(t,r,e){}});
//# sourceMappingURL=app.735857a5.js.map